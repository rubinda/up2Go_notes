"use strict";(self.webpackChunkup2go_notes=self.webpackChunkup2go_notes||[]).push([[70],{2106:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var t=n(4848),s=n(8453);const i={sidebar_position:1,sidebar_label:"Common",description:"The basics"},r="The Basics",a={id:"contributing-code/common",title:"The Basics",description:"The basics",source:"@site/docs/contributing-code/common.md",sourceDirName:"contributing-code",slug:"/contributing-code/common",permalink:"/up2Go_notes/contributing-code/common",draft:!1,unlisted:!1,editUrl:"https://github.com/rubinda/up2Go_notes/blob/main/docs/contributing-code/common.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Common",description:"The basics"},sidebar:"tutorialSidebar",previous:{title:"Contributing Code",permalink:"/up2Go_notes/category/contributing-code"},next:{title:"User stories",permalink:"/up2Go_notes/contributing-code/user-stories"}},c={},d=[{value:"The Sprint board",id:"the-sprint-board",level:2},{value:"Clone and prepare a repository",id:"clone-and-prepare-a-repository",level:2},{value:"2Team/CPRM workflow",id:"2teamcprm-workflow",level:2},{value:"Creating a Scratch Org",id:"creating-a-scratch-org",level:3},{value:"Telling WebStorm about it",id:"telling-webstorm-about-it",level:4},{value:"Deploying to an Org",id:"deploying-to-an-org",level:3},{value:"New components for the package",id:"new-components-for-the-package",level:3}];function l(e){const o={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"the-basics",children:"The Basics"}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsxs)(o.p,{children:["The official onboarding documentation provides ",(0,t.jsx)(o.a,{href:"https://sites.google.com/up2go.com/up2go-devson-boarding/software-engineering-practices",children:"Software engineering practices"})]})}),"\n",(0,t.jsxs)(o.p,{children:["You should have access to the ",(0,t.jsx)(o.a,{href:"https://github.com/Up2Go",children:"Up2Go organization"})," Github profile. If not, ask to be added to the team. The team uses ",(0,t.jsx)(o.a,{href:"https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development",children:"Trunk-based development"})," with SCRUM."]}),"\n",(0,t.jsx)(o.h2,{id:"the-sprint-board",children:"The Sprint board"}),"\n",(0,t.jsxs)(o.p,{children:["We are using github projects to manage and distribute work. You can read more about it in the ",(0,t.jsx)(o.a,{href:"/contributing-code/user-stories",children:"user stories section"}),"."]}),"\n",(0,t.jsx)("img",{src:n(5851).A,alt:"Example view of the Core project",width:"600px"}),"\n",(0,t.jsx)(o.h2,{id:"clone-and-prepare-a-repository",children:"Clone and prepare a repository"}),"\n",(0,t.jsxs)(o.p,{children:["You should figure out where you need to implement the changes (e.g. ",(0,t.jsx)(o.em,{children:"2Team"}),", ",(0,t.jsx)(o.em,{children:"cprm"})," or ",(0,t.jsx)(o.em,{children:"clean"}),"). Clone that repository (",(0,t.jsx)(o.strong,{children:"with submodules"}),") using:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"git clone --recurse-submodules git@github.com:Up2Go/<repository>.git\n"})}),"\n",(0,t.jsxs)(o.admonition,{type:"tip",children:[(0,t.jsxs)(o.p,{children:["If you forgot to include the ",(0,t.jsx)(o.code,{children:"--recurse-submodules"})," flag, you can initialize them with"]}),(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"git submodule update --init\n"})})]}),"\n",(0,t.jsxs)(o.p,{children:["You can also clone it from ",(0,t.jsx)(o.a,{href:"/environment/webstorm#github",children:"Webstorm"})," if you prefer an UI."]}),"\n",(0,t.jsx)(o.h2,{id:"2teamcprm-workflow",children:"2Team/CPRM workflow"}),"\n",(0,t.jsx)(o.p,{children:"The following applies whenever you are working with 2Team or CPRM. The newer repositories use 2GP, so the workflow is a little different."}),"\n",(0,t.jsx)(o.h3,{id:"creating-a-scratch-org",children:"Creating a Scratch Org"}),"\n",(0,t.jsx)(o.admonition,{type:"note",children:(0,t.jsxs)(o.p,{children:["You should have the default dev hub configured. If not, see ",(0,t.jsx)(o.a,{href:"/environment/sf#adding-default-dev-hub",children:"Adding default Dev Hub"})]})}),"\n",(0,t.jsx)(o.p,{children:"Run the internal script from the project root to create a scratch org. You will develop and test your changes on it:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"zsh dev-tools/rebuild-scratch-org.sh <customName>\n"})}),"\n",(0,t.jsx)(o.admonition,{type:"info",children:(0,t.jsxs)(o.p,{children:["If you encounter an error like ",(0,t.jsx)(o.em,{children:"The specified org X is not a Dev Hub"})," it most likely means you don't have the (S) Up2Go Special Developer Permissions in our org."]})}),"\n",(0,t.jsx)(o.p,{children:"You can choose any name for the scratch org. If it's already in use the existing scratch org be deleted and replaced. Once the script finishes, you should have a new scratch org ready"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"sf org list\n"})}),"\n",(0,t.jsx)("img",{src:n(1723).A,alt:"List of sf connections",width:"600px"}),"\n",(0,t.jsx)(o.h4,{id:"telling-webstorm-about-it",children:"Telling WebStorm about it"}),"\n",(0,t.jsxs)(o.p,{children:["After you've opened WebStorm on a project for the first time, Illuminated Cloud will inform you with something like ",(0,t.jsx)(o.em,{children:"Your project configuration is invalid"}),". Click on resolve and choose the newly generated scratch org connection (select your ",(0,t.jsx)(o.em,{children:"customName"})," you provided to the script)."]}),"\n",(0,t.jsx)("img",{src:n(370).A,alt:"Illuminated Cloud resolve invalid connection",width:"600px"}),"\n",(0,t.jsxs)(o.p,{children:["An offline symbol table will be generated, the project gets indexed and finally you should reload the project when prompted. If you enabled ",(0,t.jsx)(o.a,{href:"/environment/webstorm#illuminatedcloud",children:"Deploy on save"})," you could now change files and they ",(0,t.jsx)(o.em,{children:"should"})," reflect in your scratch org."]}),"\n",(0,t.jsxs)(o.admonition,{type:"tip",children:[(0,t.jsx)(o.p,{children:"You can change the active connection through Illuminated Cloud > Configure Project, also accessible from the toolbar. You should do this everytime you want to work on a new scratch org."}),(0,t.jsx)("img",{src:n(5191).A,alt:"Illuminated Cloud Configure Project",width:"600px"})]}),"\n",(0,t.jsx)(o.h3,{id:"deploying-to-an-org",children:"Deploying to an Org"}),"\n",(0,t.jsx)(o.admonition,{type:"danger",children:(0,t.jsxs)(o.p,{children:["If you're deploying a patch, ",(0,t.jsx)(o.a,{href:"/contributing-code/user-stories#working-on-defects",children:"read this"})," first."]})}),"\n",(0,t.jsxs)(o.p,{children:["Before you can use the deploy script, you have to make sure you have the connections to the appropriate orgs (ask someone to be added) and the ",(0,t.jsx)(o.strong,{children:"correct aliases"})," to them. E.g. if you worked on a defect that needs to be present in Patch 13.9, you need an alias ",(0,t.jsx)(o.code,{children:"UP2GO_2T-13.9-PACKAGE"}),". This is expected from the internal scripts. The same goes for regular user stories."]}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsxs)(o.p,{children:["If you don't have a connection yet, check out ",(0,t.jsx)(o.a,{href:"/environment/sf#authorizing-an-org",children:"How to authorize an Org"}),"."]})}),"\n",(0,t.jsx)(o.p,{children:"You can use the provided script to deploy to the org:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"zsh dev-tools/deploy-mdapi-source.sh\n"})}),"\n",(0,t.jsxs)(o.admonition,{type:"tip",children:[(0,t.jsx)(o.p,{children:"If you are unsure what exactly the alias needs to be, run the deploy script (on the right branch) and look for the packaging org line"}),(0,t.jsx)("img",{src:n(9871).A,alt:"Dev tools deploy example",width:"600px"}),(0,t.jsxs)(o.p,{children:["This is defined in ",(0,t.jsx)(o.code,{children:"dev-tools/lib/local-config.sh"})]})]}),"\n",(0,t.jsx)(o.h3,{id:"new-components-for-the-package",children:"New components for the package"}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsx)(o.p,{children:"If you referenced this new component in a previously existing class file, the new resource should be added automatically on deploy by salesforce."})}),"\n",(0,t.jsx)(o.p,{children:'Whenever you deploy a new component (class or test class, custom object, custom metadata ...) you also need to add it to the package. After the deploy, open up the trunk org (the packaging org alias during deploy) and head to Setup > Package Manager and click on "2Team"'}),"\n",(0,t.jsx)("img",{src:n(9470).A,alt:"Package Manager view in setup",width:"600px"}),"\n",(0,t.jsx)(o.p,{children:'After this click on "Add" in the package view'}),"\n",(0,t.jsx)("img",{src:n(7490).A,alt:"Package Manager add components",width:"600px"}),"\n",(0,t.jsx)(o.p,{children:"Browse through components and include your newly created ones. In my case I added a new custom object."}),"\n",(0,t.jsx)("img",{src:n(6216).A,alt:"Package Manager add component",width:"600px"}),"\n",(0,t.jsx)(o.admonition,{type:"caution",children:(0,t.jsx)(o.p,{children:"There are some components which we never wish to deploy, don't blindly add everything you see."})}),"\n",(0,t.jsx)(o.p,{children:"In the previous view, search all the components (you can use the search page in your browser) to check they are present in the list. I made sure all of my custom object's custom fields, record type name and page layout are included."})]})}function h(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9871:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/devtools-deploy-76354a0af4636ad1316ba0b08e911e5d.png"},370:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/ic2-connection_resolve-560197edf64d82361831b9979ec0054d.png"},6216:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/package-add-9c23d183f45d5613900973465bc958aa.png"},9470:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/package-setup-927bc99992d414bde0bcfdeb1ab22c0e.png"},7490:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/package-view-bb8981bc6bbda56bab4c32a8566d1dc9.png"},5851:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/projects_board-85be9e857ae94f0d40b27af2aae41f57.png"},1723:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/sf-org_list-fdaa7aa07da48a6f6f76816176c776f8.png"},5191:(e,o,n)=>{n.d(o,{A:()=>t});const t=n.p+"assets/images/webstorm_ic2-configure_project-fbea220fcc61d883fd4f7d7637efcfaf.png"},8453:(e,o,n)=>{n.d(o,{R:()=>r,x:()=>a});var t=n(6540);const s={},i=t.createContext(s);function r(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);