"use strict";(self.webpackChunkup2go_notes=self.webpackChunkup2go_notes||[]).push([[943],{3359:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var s=t(4848),n=t(8453);const o={sidebar_label:"Releasing a patch",sidebar_position:0,description:"Need to fix a bug in a released verson?"},i="Releasing a patch",r={id:"release-management/releasing-a-patch",title:"Releasing a patch",description:"Need to fix a bug in a released verson?",source:"@site/docs/release-management/releasing-a-patch.md",sourceDirName:"release-management",slug:"/release-management/releasing-a-patch",permalink:"/up2Go_notes/release-management/releasing-a-patch",draft:!1,unlisted:!1,editUrl:"https://github.com/rubinda/up2Go_notes/blob/main/docs/release-management/releasing-a-patch.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{sidebar_label:"Releasing a patch",sidebar_position:0,description:"Need to fix a bug in a released verson?"},sidebar:"tutorialSidebar",previous:{title:"Release Management",permalink:"/up2Go_notes/category/release-management"},next:{title:"New Release",permalink:"/up2Go_notes/release-management/new-release"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Compare git and the patch org",id:"compare-git-and-the-patch-org",level:3},{value:"Upload a Patch",id:"upload-a-patch",level:3},{value:"Upload done",id:"upload-done",level:3},{value:"Deprecate the previous patch",id:"deprecate-the-previous-patch",level:3},{value:"Github release",id:"github-release",level:3},{value:"Up2Go org release",id:"up2go-org-release",level:3},{value:"Inform the right people",id:"inform-the-right-people",level:3}];function h(e){const a={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h1,{id:"releasing-a-patch",children:"Releasing a patch"}),"\n",(0,s.jsx)(a.admonition,{type:"note",children:(0,s.jsx)(a.p,{children:"The following has been written for the patch creation process for 2Team and / or CPRM which uses 1GP. If you are not working on either of these two repositories, you can ignore this section."})}),"\n",(0,s.jsx)(a.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(a.p,{children:["In order to release a patch you need to have access to our appropriate patch org (w/ admin access). You can also consult the official documentation and read about the general patch upload process: ",(0,s.jsx)(a.a,{href:"https://developer.salesforce.com/docs/atlas.en-us.pkg1_dev.meta/pkg1_dev/patches_creating.htm#patches_creating",children:"Create and Upload Patches in First-Generation Managed Packages"}),"."]}),"\n",(0,s.jsxs)(a.admonition,{type:"tip",children:[(0,s.jsxs)(a.p,{children:["If you deployed stories to the patch org, you should have it available in your sf cli and you can access it via the terminal. Run ",(0,s.jsx)(a.code,{children:"sf org list"})," and you should see patch orgs listed."]}),(0,s.jsx)(a.p,{children:"For example, opening the 2Team 14.2 patch org:"}),(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"sf org open -o UP2GO_2T-14.2-PACKAGE\n"})}),(0,s.jsx)(a.p,{children:"... or the CPRM 14.1:"}),(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"sf org open -o UP2GO_CPRM_BM-14.1-PACKAGE\n"})}),(0,s.jsxs)(a.p,{children:["You can also use the WebStorm IC2 connections menu (check out ",(0,s.jsx)(a.a,{href:"/environment/webstorm#illuminated-cloud-2",children:"the IC2 section"})," if you don't see the toolbar):"]}),(0,s.jsx)("img",{src:t(7821).A,alt:"WebStorm IC2 connections",width:"600px"})]}),"\n",(0,s.jsx)(a.h3,{id:"compare-git-and-the-patch-org",children:"Compare git and the patch org"}),"\n",(0,s.jsxs)(a.p,{children:["In git we use separate branches to version patch org changes. You should ensure that everything in those branches is also deployed to the patch org. Check out ",(0,s.jsx)(a.a,{href:"/contributing-code/common#deploying-to-an-org",children:"how to deploy"})," if you find changes in git that are not in the org."]}),"\n",(0,s.jsx)(a.admonition,{type:"caution",children:(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Never deploy any new components (i.e. new files) to the patch org."})," The upload will fail due to salesforce restrictions. Consult the official documentation linked above on what is allowed."]})}),"\n",(0,s.jsx)(a.h3,{id:"upload-a-patch",children:"Upload a Patch"}),"\n",(0,s.jsx)(a.p,{children:"Unless instructed otherwise, set the following fields:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{children:' Version Name: {Verison Number} ({CPRM|2Team})\n               // e.g. "14.1.5 (CPRM)"\n Release Type: Managed - Released\n     Password: <censored, see below>\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Look for the password in our ",(0,s.jsx)(a.a,{href:"https://docs.google.com/document/d/1MFuYL1Yb6tdlKve-IgCPyDWNwZK9_yV9aS-kEP-R-Vc/edit?usp=sharing",children:"Release process document"}),"."]}),"\n",(0,s.jsx)(a.p,{children:'After that click on "Upload". You get a warning from Salesforce asking you if you are sure about the "Managed" release type, which is normal. We are confident in our fixes and we (usually) don\'t test them with beta patch releases. You can proceed with the upload.'}),"\n",(0,s.jsx)("img",{src:t(1703).A,alt:"Upload attributes",width:"600px"}),"\n",(0,s.jsx)(a.p,{children:"CPRM usually uploads faster than 2Team but in both cases it takes some time. You can, but you don't need to have the upload tab open, salesforce sends you an email when the upload is done."}),"\n",(0,s.jsx)(a.h3,{id:"upload-done",children:"Upload done"}),"\n",(0,s.jsx)(a.p,{children:"If the upload is successful, you can move on to the next section."}),"\n",(0,s.jsx)("img",{src:t(4175).A,alt:"Upload success email",width:"600px"}),"\n",(0,s.jsx)(a.p,{children:"If the upload failed, you need to investigate the test failures, (potentially) commit a fix to the patch branch, deploy and repeat the upload. It has happened in the past that test cases failed because of Salesforce being capricious, so it might suffice to simply upload again."}),"\n",(0,s.jsx)("img",{src:t(5224).A,alt:"Upload fail email",width:"600px"}),"\n",(0,s.jsx)(a.h3,{id:"deprecate-the-previous-patch",children:"Deprecate the previous patch"}),"\n",(0,s.jsx)(a.p,{children:'In the packaging org under Setup > Package Manager > (2Team | CPRM) > Versions you should click on "Deprecate" for the previously released patch version.'}),"\n",(0,s.jsx)(a.h3,{id:"github-release",children:"Github release"}),"\n",(0,s.jsxs)(a.p,{children:["On the github repository (2Team or CPRM) create a new release from the patch branch (",(0,s.jsx)(a.em,{children:"2Team or cprm"})," > Releases > Draft a new release). You should set the following details:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{children:"        Tag: v.{Major.Minor.Patch}\n     Target: patch.{Major.Minor}.x\n      Title: {Major.Minor.Patch}\n Descripton:\n             // List of issues fixed in this release. We have no standard format, \n             // you can use the image below for an example or invent your own.\n\nSet as the latest release: [x]\n             // Only when it is the actual latest release\n"})}),"\n",(0,s.jsx)("img",{src:t(6887).A,alt:"Github release details",width:"600px"}),"\n",(0,s.jsx)(a.p,{children:'Also ensure that once the github issue has all the releases needed (for every bug label) you set a checkmark on the github project. You can set in in the github project view "Defects" or on the issue itself (only visible via the project board popup view).'}),"\n",(0,s.jsx)("img",{src:t(9885).A,alt:"Github patch checkmark on issues (project view only)",width:"600px"}),"\n",(0,s.jsx)(a.h3,{id:"up2go-org-release",children:"Up2Go org release"}),"\n",(0,s.jsx)(a.p,{children:"In our org we also keep a list of releases. For example, Fiber uses these releases to get the latest 2Team package ID, so updating it is necessary."}),"\n",(0,s.jsx)(a.admonition,{type:"info",children:(0,s.jsx)(a.p,{children:"If you can't edit the records described in this section, make sure you have been added to the technology plan in our org."})}),"\n",(0,s.jsxs)(a.p,{children:["Open ",(0,s.jsx)(a.a,{href:"https://up2go.lightning.force.com/lightning/o/sfLma__Package_Version__c/list?filterName=00B50000006inDxEAI",children:"All package versions"}),' in our org. You could save it under your favourites on the upper right corner for quick access in the future. If the upload was successful, an new entry should have been created automatically for the release version you specified during upload. You can find it by "Package Version Name" or it\'s usually the only one that has no "Last Modified By".']}),"\n",(0,s.jsx)("img",{src:t(6532).A,alt:"Up2Go org All package versions",width:"600px"}),"\n",(0,s.jsxs)(a.p,{children:["Open the Package Version details and add the product release. It differs based on the Major.Minor version, consult the previous package version to figure out which release it belongs to if you are unsure. E.g. for finding the product release for ",(0,s.jsx)(a.em,{children:"13.9.14 (CPRM)"})," open ",(0,s.jsx)(a.em,{children:"13.9.13 (CPRM)"}),'. You should also populate the "GIT" link to the appropriate Github release.']}),"\n",(0,s.jsx)("img",{src:t(699).A,alt:"Up2Go org Package version details",width:"600px"}),"\n",(0,s.jsx)(a.h3,{id:"inform-the-right-people",children:"Inform the right people"}),"\n",(0,s.jsx)(a.p,{children:"If you have successfully completed all of the above steps, a new version of 2Team or CPRM is now ready to be installed in customer orgs. Usually is it sufficient to inform Georg that you have finished with the patch release and he will inform you if any additional steps are needed."}),"\n",(0,s.jsx)(a.p,{children:"Congratulations \ud83c\udf89 You have now successfully implemented bug fixes for customers."})]})}function d(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},6532:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-all_package_versions-b8f8002bb5aded1b3dc12a87e54be502.png"},6887:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-github_release-33de807b67063cd520a7c73a94938259.png"},9885:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-issue_checkmark-0930dc88326ff736b8c1892d1cbccefa.png"},699:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-package_version-b25ea88e81f8cc95da3bb8810fd258cd.png"},1703:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-upload-850b92d22ae29dda92bb80a3dd252ca4.png"},5224:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-upload_fail-d077776a8e14f8d27a316a041b9664ae.png"},4175:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-upload_success-9d3b4a7573222fb037bc3708b94cfa49.png"},7821:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/release_patch-ws_connection_menu-43c27777c31edf14631b7463bfb47551.png"},8453:(e,a,t)=>{t.d(a,{R:()=>i,x:()=>r});var s=t(6540);const n={},o=s.createContext(n);function i(e){const a=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(o.Provider,{value:a},e.children)}}}]);